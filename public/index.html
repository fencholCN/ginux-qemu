<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
var server = "ws://"+document.location.host+"/ws"
var websocket = new WebSocket(server);
websocket.onopen = function() {
    websocket.onmessage = function(message) {
        $('#msgs').append(message.data + "</br>");
        $("#msgs").scrollTop($("#msgs")[0].scrollHeight);
    };
}
websocket.onclose = function(){
	$('#error').empty().append("Lost connection to websocket");
}
$(document).ready(function() {
    $("input").keypress(function(event) {
        if (event.which == 13) {
            event.preventDefault();
            var val = $("#command").val()
            console.log(val);
            websocket.send(val + "\n");
            $("#command").val('')
        }
    });
});
</script>
</head>
<body>
    <div id="msgs" style="height:400px; overflow:auto"></div>
    <input type="text" id="command" placeholder="#" style="width:100%"/>
    <div id="error"></div>
</body>
</html>
